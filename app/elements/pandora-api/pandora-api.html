<dom-module id="pandora-api">
  <template>
    <iris-api-controller id="api"></iris-api-controller>
  </template>

  <script>
    (function(User, settings, History) {
      'use strict';



      let default_settings = [{
        name: 'API',
        items: {
          api_server: {
            element: 'input',
            label: 'Сервер',
            default: 'localhost'
          },
          api_port: {
            element: 'input',
            label: 'Порт',
            default: '80'
          }
        }
      }, {
        name: 'Рабочее место',
        items: {
          office_id: {
            element: 'input',
            label: 'Номер офиса',
            default: '0'
          },
          workstation_id: {
            element: 'input',
            label: 'Номер рабочего места',
            default: '0'
          }
        }
      }];

      Polymer({
        is: 'pandora-api',
        ready() {
          console.log("<P-API> Pandora's box  is open..");


          let arm_settings = new settings();
          arm_settings.addDesc(default_settings);
          let arm_operator = new User();
          let arm_history = new History();

          this.exposed = {
            'user': arm_operator,
            'settings': arm_settings,
            'history': arm_history
          };

          _.forEach(this.exposed, (module, name) => {
            this.$.api.expose(name, module)
          });
        }
      });
    })(IRIS.User, IRIS.settings, IRIS.History);
  </script>

</dom-module>